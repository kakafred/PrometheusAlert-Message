groups:
- name: Prometheusæ ¸å¿ƒæœåŠ¡å‘Šè­¦
  rules:
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡ç¦»çº¿
    expr: absent(up{job="prometheus"})
    for: 0m
    labels:
      severity: warning
    annotations:
      title: Prometheuæ ¸å¿ƒæœåŠ¡å‘Šè­¦
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç¦»çº¿
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç¦»çº¿ä¸­..."
  - alert: Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡ç¦»çº¿
    expr: up == 0
    for: 0m
    annotations:
      title: Prometheuæ ¸å¿ƒæœåŠ¡å‘Šè­¦
      summary: ğŸ“ Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡ã€Œ{{ $labels.job }}ã€ç¦»çº¿
      description: 'ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡ã€Œ{{ $labels.job }}ã€ç¦»çº¿ä¸­...'
    labels:
      severity: 'critical'
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡é¢„åŠ è½½è¶…æ—¶
    expr: sum by (instance, job) ((up == 0) * on (instance) group_right(job) (node_time_seconds - node_boot_time_seconds > 60))
    for: 0m
    labels:
      severity: critical
    annotations:
      title: Prometheuæ ¸å¿ƒæœåŠ¡å‘Šè­¦
      summary: ğŸ“ Prometheusæ ¸å¿ƒæœåŠ¡ã€Œ{{ $labels.job }}ã€ é¢„åŠ è½½è¶…æ—¶
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ã€Œ{{ $labels.job }}ã€é¢„åŠ è½½è¶…æ—¶ä¸€åˆ†é’Ÿäº†..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡é‡è½½å¤±è´¥
    expr: prometheus_config_last_reload_successful != 1
    for: 0m
    labels:
      severity: warning
    annotations:
      title: Prometheuæ ¸å¿ƒæœåŠ¡å‘Šè­¦
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡é‡è½½å¤±è´¥
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡é‡è½½å¤±è´¥äº†..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡é‡å¯è¿‡é‡
    expr: changes(process_start_time_seconds{job=~"prometheus|pushgateway|alertmanager"}[15m]) > 10
    for: 0m
    labels:
      severity: warning
    annotations:
      title: Prometheuæ ¸å¿ƒæœåŠ¡å‘Šè­¦
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡é‡å¯è¿‡é‡
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡å·²ç»è¿‡é‡é‡å¯{{ $value }}æ¬¡äº†..."
  - alert: Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanagerä¸¢å¤±
    expr: absent(up{job="alertmanager"})
    for: 0m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡Alertmanagerä¸¢å¤±
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡Alertmanagerä¸¢å¤±ä¸­..."
  - alert: Prometheusè¿æ¥Alertmanagerå¤±è´¥
    expr: prometheus_notifications_alertmanagers_discovered < 1
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusè¿æ¥Alertmanagerå¤±è´¥
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusè¿æ¥Alertmanagerå¤±è´¥äº†ä¸€æ¬¡åˆä¸€æ¬¡..."
  - alert: æ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanageè½½å…¥è§„åˆ™å¤±è´¥
    expr: increase(prometheus_rule_evaluation_failures_total[3m]) > 0
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„æ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanagerè½½å…¥è§„åˆ™å¤±è´¥
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„æ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanagerè½½å…¥é…ç½®æ–‡ä»¶ä¸­çš„{{ $value }}ä¸ªè§„åˆ™å¤±è´¥äº†..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡æ¨¡ç‰ˆæ‰©å±•å¤±è´¥
    expr: increase(prometheus_template_text_expansion_failures_total[3m]) > 0
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡æ¨¡ç‰ˆæ‰©å±•å¤±è´¥
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡çš„{{ $value }}ä¸ªæ¨¡ç‰ˆæ‰©å±•å¤±è´¥"
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡è½½å…¥è§„åˆ™è¶…æ—¶
    expr: prometheus_rule_group_last_duration_seconds > prometheus_rule_group_interval_seconds
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡è½½å…¥è§„åˆ™è¶…æ—¶
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡è½½å…¥è§„åˆ™ç”¨æ—¶è¶…è¿‡äº†Prometheusæ ¸å¿ƒæœåŠ¡scheduledæ—¶é—´..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡é€šçŸ¥é˜Ÿåˆ—ç§¯å‹
    expr: min_over_time(prometheus_notifications_queue_length[10m]) > 0
    for: 0m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡é€šçŸ¥é˜Ÿåˆ—å½¢æˆç§¯å‹
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡é€šçŸ¥é˜Ÿåˆ—å·²ç»10åˆ†é’Ÿæ²¡æœ‰ç©ºé—²ä¸‹æ¥äº†ï¼Œé˜Ÿåˆ—é•¿åº¦ä¸º{{ $value }}..."
  - alert: Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanageræ¶ˆæ¯æ¨é€å¤±è´¥
    expr: rate(alertmanager_notifications_failed_total[1m]) > 0
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanageræ¶ˆæ¯æ¨é€å¤±è´¥
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒç»„ä»¶æœåŠ¡Alertmanagerå·²ç»æœ‰{{ $value }}æ¡æ¶ˆæ¯æ¨é€å¤±è´¥äº†..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–ç¼“æ…¢
    expr: prometheus_target_interval_length_seconds{quantile="0.9"} / on (interval, instance, job) prometheus_target_interval_length_seconds{quantile="0.5"} > 1.05
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–ç¼“æ…¢
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–ç”¨æ—¶å¤ªé•¿ï¼Œæ•°æ®å‘ˆç°æ…¢çš„è¿˜ä¸å¦‚ä¸çœ‹..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡ScrapeåŠ è½½è¿‡é‡
    expr: increase(prometheus_target_scrapes_exceeded_sample_limit_total[10m]) > 10
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ScrapeåŠ è½½è¿‡é‡
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡åŠ è½½äº†{{ $value }}ä¸ªScrapeé…ç½®ï¼Œå·²ç»è¶…å‡ºé™åˆ¶äº†..."
  - alert: Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–å†²çª
    expr: increase(prometheus_target_scrapes_sample_duplicate_timestamp_total[5m]) > 0
    for: 0m
    labels:
      severity: warning
    annotations:
      summary: ğŸ“ ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–å†²çª
      description: "ç»ˆç«¯èŠ‚ç‚¹ã€Œ{{ $labels.instance }}ã€çš„Prometheusæ ¸å¿ƒæœåŠ¡ç›®æ ‡æŠ“å–é‡å¤å¼•å‘æ•°æ®è¢«æ‹’ç»é€ æˆä¸¢å¼ƒï¼Œæœ‰{{ $value }}ä¸ªæ—¶é—´åºåˆ—è¢«ä½ å¼„ä¸¢äº†..."
